#
# Linux kernel configuration
#

# kernel fundamentals
LX_ENABLE += TTY SERIAL_EARLYCON SERIAL_OF_PLATFORM PRINTK HAS_IOMEM
LX_ENABLE += NO_HZ NO_HZ_IDLE HIGH_RES_TIMERS PREEMPT TREE_RCU
LX_ENABLE += ARM_DMA_MEM_BUFFERABLE
LX_ENABLE += CMA DMA_CMA ZONE_DMA ZONE_DMA32

# do not generate thumb instructions
LX_DISABLE += THUMB2_KERNEL DEBUG_PREEMPT

# SoC
LX_ENABLE  += MMU ARCH_MULTI_V6 ARCH_BCM ARCH_BCM2835 SLUB
LX_DISABLE += ARCH_MULTI_V7
LX_ENABLE  += MAILBOX BCM2835_MBOX BCM2835_POWER DMA_BCM2835 PINCTRL_BCM2835
LX_ENABLE  += MUX_MMIO
LX_ENABLE  += GPIOLIB MFD_SYSCON CLK_RASPBERRYPI RASPBERRYPI_POWER
LX_ENABLE  += REGULATOR REGULATOR_FIXED_VOLTAGE REGULATOR_GPIO
LX_ENABLE  += I2C I2C_BCM2835
LX_ENABLE  += SPI SPI_BCM2835 SPI_BCM2835AUX
LX_ENABLE  += RASPBERRYPI_FIRMWARE

# UART device
LX_ENABLE += SERIAL_AMBA_PL011 SERIAL_AMBA_PL011_CONSOLE SERIAL_8250_BCM2835AUX

# Network
LX_ENABLE += NET INET NETDEVICES BCMGENET AX88796B_PHY

# USB host
LX_ENABLE += USB USB_SUPPORT USB_COMMON USB_DWCOTG USB_DWC2 NOP_USB_XCEIV USB_GADGET
LX_ENABLE += USB_ANNOUNCE_NEW_DEVICES USB_ETH USB_CDC_COMPOSITE USB_G_HID
LX_ENABLE += USB_NET_DRIVERS USB_USBNET USB_LAN78XX USB_NET_SMSC95XX BRCMFMAC USB_NET_CDC_EEM USB_MON USB_F_HID

# SD/eMMC
LX_ENABLE += MMC MMC_MXC MMC_SDHCI MMC_SDHCI_PLTFM MMC_BCM2835

# To run native Linux
LX_ENABLE += SYSFS MULTIUSER FILE_LOCKING BINFMT_ELF BINFMT_SCRIPT BLK_DEV_INITRD
LX_ENABLE += PACKET UNIX PROC_FS POSIX_TIMERS DEVTMPFS
LX_ENABLE += IP_PNP IP_PNP_DHCP

# slim down kernel by removing superfluous drivers
LX_DISABLE += USB_NET_AX8817X USB_NET_AX88179_178A USB_NET_NET1080 USB_BELKIN USB_NET_ZAURUS USB_ARMLINUX
LX_DISABLE += $(addprefix NET_VENDOR_, 3COM 8390 ADI ADAPTEC AGERE ALACRITECH \
                ALTEON AMAZON AMD AQUANTIA ARC ASIX ATHEROS BROADCOM BROCADE \
                CADENCE CAVIUM CHELSIO CIRRUS CISCO CORTINA DAVICOM DEC DLINK EMULEX \
                ENGLEDER EZCHIP FARADAY FUNGIBLE GOOGLE HISILICON HUAWEI I825XX INTEL \
                LITEX MARVELL MELLANOX MICREL MICROCHIP MICROSEMI MICROSOFT \
                MYRI NATSEMI NETERION NETRONOME NI NVIDIA OKI PACKET_ENGINES \
                PENSANDO QLOGIC QUALCOMM RDC REALTEK RENESAS ROCKER SAMSUNG \
                SEEQ SILAN SIS SOCIONEXT SOLARFLARE STMICRO SUN SYNOPSYS \
                TEHUTI TI VERTEXCOM VIA WANGXUN WIZNET XILINX)
LX_DISABLE += WLAN WIRELESS
LX_DISABLE += MOUSE_PS2
